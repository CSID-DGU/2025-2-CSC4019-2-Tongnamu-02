{% extends 'base.html' %}
{% load static %}

{% block title %}분석 결과{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/result_analysis.css' %}">
{% endblock %}

{% block content %}
<div class="analysis-container">
    <div class="left-panel">
        <h3 style="margin-bottom: 20px;">분석된 이미지 결과</h3>
        <img src="{{ analysis.original_image_url.url }}" class="uploaded-img" alt="분석 대상">
        
        <div class="btn-group">
            <a href="{% url 'analysis' %}" class="btn btn-back">다시 분석</a>
        </div>
    </div>

    <div class="right-panel">
        <h3 style="margin-bottom: 20px; color: #fd7e14;">AI 분석 리포트</h3>
        
        <div class="report-box">
            <ul style="list-style: none; padding: 0;">
                <li><strong> 제품 종류:</strong> {{ parsed_data.product_type }}</li>
                <li><strong> 배경 테마:</strong> {{ parsed_data.theme }}</li>
                <li><strong> 분위기:</strong> {{ parsed_data.mood }}</li>
                <li><strong> 제품 위치:</strong> {{ parsed_data.placement }}</li>
                <br>
                <li><strong> 추천 추가 프롬프트:</strong><br>{{ parsed_data.user_prompt }}</li>
            </ul>
            
            <hr style="margin: 20px 0; border-top: 1px solid #ddd;">
            
            <a href="{% url 'main' %}?product_type={{ parsed_data.product_type }}&theme={{ parsed_data.theme }}&mood={{ parsed_data.mood }}&placement={{ parsed_data.placement }}&prompt={{ parsed_data.user_prompt }}" 
               class="btn btn-main" style="display: block; text-align: center;">
               이 설정으로 이미지 생성하러 가기
            </a>
        </div>
        
        <details style="margin-top: 20px; color: #999; cursor: pointer;">
            <summary>원본 분석 로그 보기</summary>
            <pre style="font-size: 0.8rem;">{{ analysis.analysis_text }}</pre>
        </details>
    </div>
</div>
{% endblock %}